#!/usr/bin/env node
import r from"fs-extra";import t from"fs-extra";import{renderFile as o}from"template-file";import a from"glob";var s=async()=>{let e=[];a("**/*.stories.tsx",{},function(i,n){e=[...n]}),t.mkdirSync(".litebook"),t.writeFileSync(".litebook/index.html",await o("./templates/index.html",{})),t.writeFileSync(".litebook/index.tsx",await o("./templates/index.tsx",{})),t.writeFileSync(".litebook/tsconfig.json",await o("./templates/tsconfig.json",{})),t.writeFileSync(".litebook/public/logo.svg",await o("./templates/public/logo.svg",{})),t.writeFileSync(".litebook/vite.config.ts",await o("./templates/vite.config.ts",{stories:e.map(i=>({lower:i.toLowerCase(),capitalize:i}))})),t.mkdirSync(".litebook/stories"),e.forEach(async i=>{t.writeFileSync(`.litebook/stories/${i}/iframe.tsx`,await o("./templates/stories/Component/iframe.tsx",{name:i}))})};var c=async()=>{let e=r.readJSONSync("package.json");e.scripts={...e.scripts,litebook:"vite serve .litebook","litebook:build":"vite build .litebook"},r.writeJSONSync("package.json",e,{spaces:2});try{s()}catch{process.stdout.write("Litebook already initialized in this repo")}process.exit(0)};c().catch(e=>{process.stderr.write("Aborting installation..."),e instanceof Error?process.stderr.write(JSON.stringify(e)):(process.stderr.write("An unknown error has occurred. Please open an issue on github with the below:"),process.stdout.write(e)),process.exit(1)});
//# sourceMappingURL=index.js.map